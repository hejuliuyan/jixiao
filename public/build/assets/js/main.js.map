{"version":3,"sources":["base.js","public.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function($){\r\n    var original_title = document.title;\r\n\r\n    var StarHub = {\r\n        init: function(){\r\n            var self = this;\r\n\r\n            self.siteBootUp();\r\n\r\n            //隐藏提示信息\r\n            $('div.alert').not('.alert-important').delay(3000).fadeOut(350);\r\n\r\n            //sweetAlert2默认设置\r\n            swal.setDefaults({allowOutsideClick: false,confirmButtonColor: '#39C'});\r\n        },\r\n\r\n        /*\r\n         * Things to be execute when normal page load\r\n         * and pjax page load.\r\n         */\r\n        siteBootUp: function(){\r\n            var self = this;\r\n            self.initAjax();\r\n            self.initTime();\r\n            self.initSideClick();\r\n        },\r\n\r\n        initAjax: function() {\r\n            $.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\r\n                }\r\n            });\r\n        },\r\n\r\n        initTime: function() {\r\n            //每秒刷新时间显示\r\n            setInterval(function () {\r\n                var nowTime = moment().format('YYYY年MM月DD日 HH:mm:ss');\r\n                $('#navTime').html(nowTime);\r\n            }, 1000);\r\n        },\r\n\r\n        initSideClick: function () {\r\n            $('.openPopover').on('click', function () {\r\n                var subMenu = $(this).siblings('.sub-menu');\r\n\r\n                if(subMenu.hasClass('hidden')) {\r\n                    subMenu.removeClass('hidden');\r\n                }else {\r\n                    subMenu.addClass('hidden');\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    window.StarHub = StarHub;\r\n})(jQuery);\r\n\r\n$(document).ready(function()\r\n{\r\n    StarHub.init();\r\n});\r\n\r\n/**\r\n * 身份证验证函数\r\n *\r\n * @param obj\r\n * @returns {boolean}\r\n */\r\nfunction card(obj){\r\n    var reg=/^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$|^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X|x)$/;\r\n    if(!reg.test(obj)){\r\n        return false;\r\n    }else{\r\n        return true;\r\n    }\r\n}\r\n\r\n/**\r\n * 解析url参数(正则匹配)\r\n *\r\n * @param name\r\n * @returns {*}\r\n */\r\nfunction urlParam(name) {\r\n    var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\r\n    var r = window.location.search.substr(1).match(reg);\r\n    if(r!=null)return  unescape(r[2]); return null;\r\n}\r\n\r\n/**\r\n * 移动端判断\r\n *\r\n * @returns {boolean}\r\n */\r\nfunction isMobile() {\r\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent);\r\n}\r\n\r\n/**\r\n * 检查输入是否正确的电话和手机号\r\n *\r\n * @param telephone\r\n * @returns {boolean}\r\n */\r\nfunction isTelOrMobile(telephone){\r\n    var telReg = /^((0\\d{2,3})-)(\\d{7,8})$/;\r\n    var mobileReg = /^1[34578]\\d{9}$/;\r\n\r\n    return telReg.test(telephone) || mobileReg.test(telephone);\r\n}\r\n\r\n/**\r\n * 时间数字补0\r\n *\r\n * @param time\r\n * @returns {string}\r\n */\r\nfunction timeFormat(time) {\r\n    return time < 10 ? '0'+time : time;\r\n}\r\n\r\n/**\r\n * 数值数字判断，最高保留4位小数\r\n *\r\n * @param value\r\n * @returns {boolean}\r\n */\r\nfunction checkNum(value) {\r\n    var rule = /^[0-9]+([.]\\d{1,4})?$/;\r\n    return rule.test(value);\r\n}\r\n\r\n/**\r\n * 限制输入数字和小数点\r\n *\r\n * @param obj\r\n */\r\nfunction clearNoNum(obj) {\r\n    obj.value = obj.value.replace(/[^\\d.]/g, \"\");//清除“数字”和“.”以外的字符\r\n    obj.value = obj.value.replace(/^\\./g, \"\");//验证第一个字符是数字而不是.\r\n    obj.value = obj.value.replace(/\\.{2,}/g, \".\");//只保留第一个. 清除多余的.\r\n    obj.value = obj.value.replace(\".\", \"$#$\").replace(/\\./g,\"\").replace(\"$#$\", \".\");\r\n}\r\n\r\n/**\r\n * 是否整数\r\n *\r\n * @param obj\r\n * @returns {boolean}\r\n */\r\nfunction isInteger(obj) {\r\n    return obj%1 === 0;\r\n}\r\n\r\n/**\r\n * 是否小数\r\n *\r\n * @param obj\r\n * @returns {boolean}\r\n */\r\nfunction isDecimal(obj) {\r\n    var reg = \"^([0-9]*[.0-9])$\"; // 小数测试\r\n    var re = new RegExp(reg);\r\n    if (obj.search(re) != -1)\r\n        return true;\r\n    else\r\n        return false;\r\n}\r\n\r\n/**\r\n * 数字前面补零输出\r\n *\r\n * @param num\r\n * @param length\r\n * @returns {*}\r\n */\r\nfunction prefixInteger(num, length) {\r\n    return (Array(length).join('0') + num).slice(-length);\r\n}\r\n\r\n/**\r\n * 判断字符串是否为空\r\n *\r\n * @param obj\r\n * @returns {boolean}\r\n */\r\nfunction isEmpty(obj) {\r\n    if(obj == '' || obj == null || obj == undefined) {\r\n        return true;\r\n    }else {\r\n        return obj.replace(/(^\\s+)|(\\s+$)/g,\"\").length == 0;\r\n    }\r\n}\r\n\r\n/**\r\n * 使用循环的方式判断一个元素是否存在于一个数组中\r\n *\r\n * @param arr 数组\r\n * @param needle 元素值\r\n */\r\nfunction inArray(arr, needle){\r\n    var count = arr.length;\r\n    for(var i = 0; i < count; i++){\r\n        if(needle == arr[i]){ return true; }\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * 操作提示信息（自动消失）\r\n *\r\n * @param type 类型\r\n * @param message 信息\r\n */\r\nfunction promptBox1(type, message) {\r\n    var type_name = type ? 'success':'error';\r\n    //调用模态框\r\n    swal({ type: type_name, text: message, timer: 1000 }).catch(swal.noop);\r\n}\r\n\r\n/**\r\n * 操作提示信息\r\n *\r\n * @param type 类型\r\n * @param message 信息\r\n */\r\nfunction promptBox2(type, message) {\r\n    var type_name = type ? 'success':'error';\r\n    //调用模态框\r\n    swal({ type: type_name, text: message}).catch(swal.noop);\r\n}\r\n\r\n/**\r\n * input加载图片显示\r\n *\r\n * @param docObj input控件\r\n * @param imgObj 图片显示元素\r\n * @param localObj 父亲节点元素\r\n * @returns {boolean}\r\n */\r\nfunction imagePreview(docObj, imgObj, localObj) {\r\n    var imgObjPreview=document.getElementById(imgObj);\r\n\r\n    if(docObj.files &&docObj.files[0])\r\n    {\r\n        //火狐下，直接设img属性\r\n        imgObjPreview.style.display = 'block';\r\n        imgObjPreview.style.width = '100%';\r\n        imgObjPreview.style.height = '100%';\r\n        //imgObjPreview.src = docObj.files[0].getAsDataURL();\r\n\r\n        //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式\r\n        imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);\r\n    }\r\n    else\r\n    {\r\n        //IE下，使用滤镜\r\n        docObj.select();\r\n        var imgSrc = document.selection.createRange().text;\r\n        var localImagId = document.getElementById(localObj);\r\n        //必须设置初始大小\r\n        localImagId.style.width = \"100%\";\r\n        localImagId.style.height = \"100%\";\r\n        //图片异常的捕捉，防止用户修改后缀来伪造图片\r\n        try{\r\n            localImagId.style.filter=\"progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)\";\r\n            localImagId.filters.item(\"DXImageTransform.Microsoft.AlphaImageLoader\").src = imgSrc;\r\n        }\r\n        catch(e)\r\n        {\r\n            alert(\"您上传的图片格式不正确，请重新选择!\");\r\n            return false;\r\n        }\r\n        imgObjPreview.style.display = 'none';\r\n        document.selection.empty();\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * 修改url中某个指定的参数的值\r\n *\r\n * @param url 目标url\r\n * @param arg 需要替换的参数名称\r\n * @param arg_val 替换后的参数的值\r\n * @returns {string} 参数替换后的url\r\n */\r\nfunction changeURLArg(url,arg,arg_val) {\r\n    var pattern=arg+'=([^&]*)';\r\n    var replaceText=arg+'='+arg_val;\r\n    if(url.match(pattern)){\r\n        var tmp='/('+ arg+'=)([^&]*)/gi';\r\n        tmp=url.replace(eval(tmp),replaceText);\r\n        return tmp;\r\n    }else{\r\n        if(url.match('[\\?]')){\r\n            return url+'&'+replaceText;\r\n        }else{\r\n            return url+'?'+replaceText;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 公式计算扩展（百分比转换为小数，并四舍五入）\r\n *\r\n * @param obj 公式字符串\r\n * @returns {*} 计算结果\r\n */\r\nfunction math_compute(obj) {\r\n    var result = '';\r\n    var length = obj.length;\r\n    var index = 0;\r\n    var num = '';\r\n\r\n    if(length == 0) {\r\n        return obj;\r\n    }\r\n\r\n    while (index < length) {\r\n        var str = obj.substr(index, 1);\r\n\r\n        if(str == '(' || str == ')' || str == '+' || str == '-' || str == '*' || str == '/') {\r\n            if(num.indexOf('%') > 0) {\r\n                num = num.replace('%', '')/100;\r\n            }\r\n\r\n            result += num + str;\r\n            num = '';\r\n        }else {\r\n            num += str;\r\n        }\r\n\r\n        index++;\r\n    }\r\n\r\n    if(num.indexOf('%') > 0) {\r\n        num = num.replace('%', '')/100;\r\n    }\r\n\r\n    result += num;\r\n    result = math.eval(result);\r\n\r\n    return math.round(result);\r\n}","var RHA = {\r\n    delete: function (obj) {\r\n        var _this = $(obj);\r\n        var _url = _this.data('url');\r\n\r\n        swal({\r\n            html: '<strong>确定删除吗</strong>',\r\n            type: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            showLoaderOnConfirm: true,\r\n            preConfirm: function () {\r\n                return new Promise(function (resolve) {\r\n                    $.ajax({\r\n                        url: _url,\r\n                        method: 'POST',\r\n                        dataType: 'json'\r\n                    }).done(function(data) {\r\n                        resolve();\r\n\r\n                        if(data.result == 1) {\r\n                            promptBox1(true, data.msg);\r\n                            window.location.reload();\r\n                        }else {\r\n                            promptBox2(false, data.msg);\r\n                        }\r\n                    })\r\n                });\r\n            }\r\n        }).catch(swal.noop);\r\n    },\r\n    save: function (obj) {\r\n        var _this = $(obj);\r\n        var form = $('.project-form');\r\n        var action = _this.data('action');\r\n\r\n        _this.attr('disabled', true);\r\n        form.attr('action', action);\r\n\r\n        form.submit();\r\n    },\r\n    order: function (obj) {\r\n        var _this = $(obj);\r\n        var form = $('.project-form');\r\n        var action = _this.data('action');\r\n\r\n        _this.attr('disabled', true);\r\n\r\n        swal({\r\n            html: '<strong>备注</strong><textarea name=\"remark-value\" class=\"swal2-textarea\" placeholder=\"请填写备注\"></textarea>',\r\n            showCancelButton: true,\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            showLoaderOnConfirm: true\r\n        }).then(function(){\r\n            var remark_val = $('textarea[name=\"remark-value\"]').val();\r\n            var remark_html = '<input type=\"hidden\" name=\"remark\" value=\"'+remark_val+'\"/>';\r\n            _this.after(remark_html);\r\n\r\n            form.attr('action', action);\r\n            form.submit();\r\n        },function(dismiss){\r\n            if (dismiss === 'cancel') {\r\n                _this.attr('disabled', false);\r\n            }\r\n        });\r\n    }\r\n};\r\n"]}